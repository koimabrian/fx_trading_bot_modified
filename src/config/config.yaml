backtesting:
  data_range: 2025-11-27:2026-01-18
  min_profit_factor: 1.2
  min_sharpe_threshold: 0.5
  optimization:
    ema:
      fast_period:
      - 5
      - 8
      - 10
      - 12
      - 15
      slow_period:
      - 15
      - 20
      - 25
      - 30
      - 35
    macd:
      fast_period:
      - 8
      - 10
      - 12
      - 14
      - 16
      signal_period:
      - 6
      - 8
      - 9
      - 10
      - 12
      slow_period:
      - 20
      - 24
      - 26
      - 28
      - 32
    max_combos: 200
    rsi:
      overbought:
      - 65
      - 70
      - 75
      - 80
      oversold:
      - 20
      - 25
      - 30
      - 35
      - 40
      period:
      - 10
      - 12
      - 14
      - 16
      - 18
      - 20
    sma:
      fast_period:
      - 5
      - 8
      - 10
      - 12
      - 15
      slow_period:
      - 15
      - 20
      - 25
      - 30
      - 35
data:
  fetch_limit: 1000
  fetch_multiplier: 3
  min_fetch_buffer: 50
database:
  path: src/data/market_data.sqlite
gui:
  host: 127.0.0.1
  port: 5000
live_trading:
  aggressive_mode: true
  max_consecutive_losses: 3
  min_profit_factor: 1.0
  min_sharpe_requirement: -0.5
  min_signal_confidence: 0.40
  use_adaptive_selection: true
  use_exit_strategies: true
logging:
  console: true
  file: logs/bot.log
  format: '[%(asctime)s] %(levelname)s - %(name)s - %(message)s'
  level: DEBUG
mt5:
  login: 297864944
  password: Brian@2025
  server: Exness-MT5Trial9
risk_management:
  daily_loss_limit: 100.0          # Stop trading if daily loss exceeds this ($)
  lot_size: 0.01                   # Default position size (base for adaptive sizing)
  lot_size_min: 0.01              # Minimum lot size (low confidence)
  lot_size_max: 0.5               # Maximum lot size (high confidence)
  max_positions: 15                 # Maximum concurrent open positions (total)
  max_positions_per_symbol: 5      # Maximum positions per single symbol
  min_signal_confidence: 0.45      # Minimum confidence threshold (0-1)
  position_sizing: adaptive        # 'fixed' or 'adaptive' (confidence-based scaling)
  scale_by_confidence: true        # Scale position size by signal confidence
  scale_by_account_balance: true   # Scale position size by account balance
  confidence_multiplier: 2.0       # Position size multiplier based on confidence range
  stop_loss_percent: 1.0           # Stop loss % below entry
  take_profit_percent: 2.0         # Take profit % above entry (2% = good risk/reward)
  trailing_stop: true              # Enable trailing stop loss
  trailing_stop_percent: 0.5       # Trailing stop % distance
  trailing_activation_percent: 0.0 # Minimum profit % before trailing activates (0 = immediate)
  max_hold_bars: 100               # Maximum bars to hold position before time-based exit
  equity_target_percent: 5.0       # Exit all positions when account equity increases by this %
  use_atr_stops: true              # Enable ATR-based dynamic stops
  atr_stop_multiplier: 2.0         # ATR multiplier for stop loss calculation
  
  # Category-based position limits (for position persistence & monitoring)
  category_limits:
    forex: 3                       # Max concurrent FOREX positions
    crypto: 4                       # Max concurrent CRYPTO positions
    stocks: 2                       # Max concurrent STOCKS positions
    commodities: 2                  # Max concurrent COMMODITIES positions
    indices: 1                      # Max concurrent INDICES positions
  
  # Position persistence settings
  persist_positions: true           # Enable position persistence across restarts
  position_recovery_timeout_min: 5  # Minutes to wait before declaring position recovery complete
  session_id_format: datetime       # 'datetime' or 'uuid' for session tracking
  
  # Emergency protection
  daily_loss_limit_pct: 5.0         # Stop all trading if daily loss exceeds this % of account
  emergency_stop_enabled: true      # Enable emergency stop functionality
  enable_position_recovery: true    # Enable recovering open positions from MT5 on startup
  # Tuning Notes:
  # - min_signal_confidence: Increase to 0.6-0.7 for fewer but higher-quality signals
  # - take_profit_percent: Decrease to 1.5% for tighter exits, increase to 3-4% for swing trades
  # - confidence_multiplier: Higher = more aggressive sizing on high-confidence signals
  # - daily_loss_limit: Set to 2-5% of account balance for risk management
  # - equity_target_percent: Set to desired daily profit target (e.g., 2-5%)
  # - trailing_activation_percent: Set >0 to only trail after reaching minimum profit

# Exit Strategies Configuration (Framework)
# Allows composing multiple exit strategies with flexible parameters.
# Each strategy can be independently configured and combined.
exit_strategies:
  # Example configuration showing all available exit strategy types:
  # - type: stop_loss
  #   params:
  #     sl_pct: 0.01  # 1% stop loss
  # - type: take_profit
  #   params:
  #     tp_pct: 0.02  # 2% take profit
  # - type: trailing_stop
  #   params:
  #     trail_pct: 0.005  # 0.5% trailing distance
  - type: trailing_sl
    params:
      activate_pct: 0.05  # Activate trailing after +5% profit
      trail_pct: 0.02     # Trail by 2% once activated
  - type: equity_percent
    params:
      pct: 5  # Exit when account grows by 5%
  - type: signal_change
    params: {}  # Exit when signal reverses (BUY→SELL or SELL→BUY)
  
  # Note: The trailing_sl type uses TrailingStopStrategy with activation_percent parameter.
  # To use it, specify: trail_pct (trailing distance) and activate_pct (min profit to activate).

strategies:
- name: rsi
  params:
    overbought: 70
    oversold: 30
    period: 14
    volume: 0.01
- name: macd
  params:
    fast_period: 12
    signal_period: 9
    slow_period: 26
    volume: 0.01
- name: sma
  params:
    fast_period: 10
    slow_period: 20
    volume: 0.01
- name: ema
  params:
    fast_period: 10
    slow_period: 20
    volume: 0.01
sync:
  end_date: '2026-01-18'
  fetch_count: 10000
  incremental_interval_min: 4
  min_rows_threshold: 1000
  start_date: '2025-11-27'
timeframes:
- 15
- 60
- 240
volatility:
  atr_period: 14
  lookback_bars: 200
  min_threshold: 0.0001
  top_n_pairs: 100
# Trade Monitoring Configuration (Real-time monitoring of open positions)
trade_monitoring:
  enabled: true                          # Enable real-time trade monitoring
  update_frequency_seconds: 5            # Check open positions every N seconds
  check_profit_loss: true                # Monitor profit/loss continuously
  check_stop_loss_hits: true             # Detect when stop loss is hit
  check_take_profit_hits: true           # Detect when take profit is hit
  
  # Monitoring alerts
  alert_on_drawdown_pct: 2.0            # Alert when single trade loses more than N%
  alert_on_margin_level: 150.0          # Alert when margin level drops below N%
  alert_on_high_spread: true            # Alert when spread widens unusually
  
  # Monitoring refresh rates
  position_refresh_interval_seconds: 10  # Refresh position list from MT5
  account_refresh_interval_seconds: 30   # Refresh account balance/equity
  
# Backtesting Configuration (Extended settings)
backtesting_extended:
  save_trades_to_db: true               # Save all backtest trades to database
  archive_parameters: true              # Archive optimization parameters for review
  calculate_advanced_metrics: true       # Calculate Sharpe, Sortino, Calmar ratios
  volatility_ranking: true              # Rank strategies by volatility adjustment