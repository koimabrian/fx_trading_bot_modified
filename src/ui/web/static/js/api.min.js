const apiCache={data:{},ttl:5*60*1000,set(key,value){this.data[key]={value,timestamp:Date.now()};},get(key){const cached=this.data[key]; if (!cached) return null;const age=Date.now()-cached.timestamp; if (age>this.ttl){delete this.data[key]; return null;} return cached.value;},clear(){this.data={};}};async function apiCall(endpoint,options={}){const url=`${DASHBOARD_CONFIG.API_BASE}${endpoint}`;const cacheKey=`${endpoint}`; if (!options.method||options.method==='GET'){const cached=apiCache.get(cacheKey); if (cached){console.log(`[CACHE HIT]${endpoint}`); return cached;}}const defaultOptions={headers:{'Content-Type':'application/json'}};try{console.log(`[CACHE MISS]${endpoint}`);const response=await fetch(url,{...defaultOptions,...options}); if (!response.ok){throw new Error(`API Error:${response.status}${response.statusText}`);}const data=await response.json(); if (!options.method||options.method==='GET'){apiCache.set(cacheKey,data);} return data;}catch(error){console.error(`API Call Failed:${url}`,error);throw error;}}async function fetchLiveData(){ return apiCall('/live-data');}async function fetchBacktestResults(){ return apiCall('/results');}async function fetchOptimalParameters(){ return apiCall('/optimal-parameters');}async function fetchStrategyComparison(timeframe){ return apiCall(`/comparison/strategies/${timeframe}`);}async function fetchPairComparison(timeframe){ return apiCall(`/comparison/pairs/${timeframe}`);}async function fetchPerformanceMatrix(timeframe){ return apiCall(`/comparison/matrix/${timeframe}`);}async function fetchBacktestData(){try{const[resultsData,paramsData]=await Promise.allSettled([fetchBacktestResults(),fetchOptimalParameters()]); return {results:resultsData.status==='fulfilled' ? resultsData.value:{results:[]},params:paramsData.status==='fulfilled' ? paramsData.value:{}};}catch(error){console.error('Error fetching backtest data:',error);throw error;}}