const lazyCharts={loaded: new Set(),pendingData:{},register(chartId,config){this.pendingData[chartId]=config;},load(chartId){ if (this.loaded.has(chartId)){console.log(`[ALREADY LOADED]Chart:${chartId}`); return ;}const config=this.pendingData[chartId]; if (!config){console.warn(`[LAZY LOAD]No config found for chart:${chartId}`); return ;}console.log(`[LAZY LOAD]Loading chart:${chartId}`);Plotly.newPlot(chartId,config.chartData,config.layout,DASHBOARD_CONFIG.PLOTLY_CONFIG);this.loaded.add(chartId);delete this.pendingData[chartId];},loadMultiple(chartIds){chartIds.forEach(id=>this.load(id));},clearAll(){this.loaded.clear();this.pendingData={};}}; function setupChartLazyLoading(){const tabButtons=document.querySelectorAll('[data-chart-tab]');tabButtons.forEach(btn=>{btn.addEventListener('click',()=>{const chartId=btn.dataset.chartTab;lazyCharts.load(chartId);});});console.log('[LAZY LOAD]Chart lazy loading initialized');} function createBarChart(chartId,xData,yData,title,xLabel,yLabel,colors=null){ if (!colors){colors=createColorArray(yData);}const chartData=[{x:xData,y:yData,type:'bar',marker:{color:colors},hovertemplate:'<b>%{x}</b><br>'+yLabel+':%{y:.3f}<extra></extra>'}];const layout={title:title,xaxis:{title:xLabel},yaxis:{title:yLabel},margin:{b:80},plot_bgcolor:'#f8fafc',paper_bgcolor:'white'};Plotly.newPlot(chartId,chartData,layout,DASHBOARD_CONFIG.PLOTLY_CONFIG);} function createHeatmap(chartId,zData,xData,yData,title,xLabel='Strategy',yLabel='Pair'){const chartData=[{z:zData,x:xData,y:yData,type:'heatmap',colorscale:'RdYlGn',hovertemplate:'<b>%{y}Ã—%{x}</b><br>Sharpe:%{z:.3f}<extra></extra>'}];const layout={title:title,xaxis:{title:xLabel},yaxis:{title:yLabel},plot_bgcolor:'#f8fafc',paper_bgcolor:'white'};Plotly.newPlot(chartId,chartData,layout,DASHBOARD_CONFIG.PLOTLY_CONFIG);} function createLineChart(chartId,xData,yData,title,xLabel,yLabel,color='#667eea'){const chartData=[{x:xData,y:yData,type:'scatter',mode:'lines',line:{color:color,width:2},hovertemplate:'<b>%{x}</b><br>'+yLabel+':%{y:.2f}<extra></extra>'}];const layout={title:title,xaxis:{title:xLabel},yaxis:{title:yLabel},plot_bgcolor:'#f8fafc',paper_bgcolor:'white'};Plotly.newPlot(chartId,chartData,layout,DASHBOARD_CONFIG.PLOTLY_CONFIG);} function updateChart(chartId,xData,yData){Plotly.restyle(chartId,{x:[xData],y:[yData]});} function clearChart(chartId){Plotly.purge(chartId);}