<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FX Trading Bot - Unified Dashboard</title>

    <!-- External Dependencies -->
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>

    <!-- CSS Files (Modular & Maintainable) -->
    <link rel="stylesheet" href="../static/css/theme.css">
    <link rel="stylesheet" href="../static/css/layout.css">
    <link rel="stylesheet" href="../static/css/components.css">
    <link rel="stylesheet" href="../static/css/interactive.css">
    <link rel="stylesheet" href="../static/css/tabs.css">
    <link rel="stylesheet" href="../static/css/responsive.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>âš™ï¸ FX Trading Bot Dashboard</h1>
                <p>Real-time Trading Monitor & Analysis</p>
            </div>
            <!-- Hamburger Menu Button (Mobile Only) -->
            <button class="hamburger-menu" id="hamburger-toggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs" id="nav-menu">
            <button class="tab-btn active" onclick="switchTab('live')">ğŸ“Š Live Trading</button>
            <button class="tab-btn" onclick="switchTab('backtest')">ğŸ“ˆ Backtesting</button>
            <button class="tab-btn" onclick="switchTab('strategies')">ğŸ† Strategy Ranking</button>
            <button class="tab-btn" onclick="switchTab('pairs')">ğŸ“ Pair Analysis</button>
            <button class="tab-btn" onclick="switchTab('matrix')">ğŸ”¥ Performance Matrix</button>
        </div>

        <!-- ==================== LIVE TRADING TAB ==================== -->
        <div id="live" class="tab-content active">
            <div class="section">
                <h2>ğŸ“Š Live Statistics</h2>
                <div class="grid" id="live-stats-grid">
                    <div class="loading">Loading live data...</div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸš€ Recent Signals</h2>
                <div id="live-signals"></div>
            </div>

            <div class="section">
                <h2>ğŸ“ˆ Open Positions</h2>
                <div id="live-positions"></div>
            </div>

            <div class="section">
                <h2>ğŸ“‹ Recent Trades</h2>
                <div id="live-trades"></div>
            </div>
        </div>

        <!-- ==================== BACKTESTING TAB ==================== -->
        <div id="backtest" class="tab-content">
            <div class="section">
                <h2>ğŸ“Š Backtest Statistics</h2>
                <div class="grid" id="backtest-stats-grid">
                    <div class="loading">Loading backtest data...</div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ“ˆ Backtest Results</h2>
                <div id="backtest-results"></div>
            </div>

            <div class="section">
                <h2>âš¡ Optimal Parameters</h2>
                <div id="backtest-params"></div>
            </div>

            <div class="section">
                <h2>ğŸ’¹ Performance Chart</h2>
                <div class="chart-container" id="backtest-chart"></div>
            </div>
        </div>

        <!-- ==================== STRATEGY RANKING TAB ==================== -->
        <div id="strategies" class="tab-content">
            <div class="section">
                <h2>ğŸ† Best Overall Strategy</h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="strategyTimeframe">Timeframe:</label>
                        <select id="strategyTimeframe">
                            <option value="15">15 Min</option>
                            <option value="60" selected>1 Hour</option>
                            <option value="240">4 Hours</option>
                        </select>
                    </div>
                </div>
                <div class="grid" id="strategy-best"></div>
            </div>

            <div class="section">
                <h2>ğŸ“Š All Strategies Ranked</h2>
                <div id="strategy-ranking"></div>
            </div>

            <div class="section">
                <h2>ğŸ“ˆ Strategy Comparison Chart</h2>
                <div class="chart-container" id="strategy-chart"></div>
            </div>
        </div>

        <!-- ==================== PAIR ANALYSIS TAB ==================== -->
        <div id="pairs" class="tab-content">
            <div class="section">
                <h2>â­ Best Trading Pair</h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="pairTimeframe">Timeframe:</label>
                        <select id="pairTimeframe">
                            <option value="15">15 Min</option>
                            <option value="60" selected>1 Hour</option>
                            <option value="240">4 Hours</option>
                        </select>
                    </div>
                </div>
                <div class="grid" id="pair-best"></div>
            </div>

            <div class="section">
                <h2>ğŸ“Š All Pairs Performance</h2>
                <div id="pair-ranking"></div>
            </div>

            <div class="section">
                <h2>ğŸ“ˆ Pair Performance Chart</h2>
                <div class="chart-container" id="pair-chart"></div>
            </div>
        </div>

        <!-- ==================== PERFORMANCE MATRIX TAB ==================== -->
        <div id="matrix" class="tab-content">
            <div class="section">
                <h2>ğŸ”¥ Strategy vs Pair Performance Matrix</h2>
                <div class="controls">
                    <div class="control-group">
                        <label for="matrixTimeframe">Timeframe:</label>
                        <select id="matrixTimeframe">
                            <option value="15">15 Min</option>
                            <option value="60" selected>1 Hour</option>
                            <option value="240">4 Hours</option>
                        </select>
                    </div>
                </div>
                <div class="chart-container" id="matrix-heatmap"></div>
            </div>

            <div class="section">
                <h2>ğŸ“‹ Matrix Details</h2>
                <div id="matrix-table"></div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files (Modular & Maintainable) -->
    <!-- Configuration & Utilities (load first) -->
    <script src="../static/js/config.js"></script>
    <script src="../static/js/utils.js"></script>

    <!-- API & Chart Functions -->
    <script src="../static/js/api.js"></script>
    <script src="../static/js/charts.js"></script>

    <!-- Tab & Display Logic -->
    <script src="../static/js/tabs.js"></script>
    <script src="../static/js/data-display.js"></script>

    <!-- Dashboard Initialization (load last) -->
    <script src="../static/js/dashboard.js"></script>

    <!-- Mobile Navigation Handler -->
    <script>
        // Hamburger menu toggle for mobile navigation
        const hamburger = document.getElementById('hamburger-toggle');
        const navMenu = document.getElementById('nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', function (e) {
                e.stopPropagation(); // Prevent document click from immediately closing
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // Close menu when a tab is clicked
            const tabButtons = navMenu.querySelectorAll('.tab-btn');
            tabButtons.forEach(button => {
                button.addEventListener('click', function () {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', function (event) {
                const isClickInsideHeader = event.target.closest('.header');
                const isClickInsideNav = event.target.closest('.tabs');

                if (!isClickInsideHeader && !isClickInsideNav && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            });
        }
    </script>
</body>

</html>